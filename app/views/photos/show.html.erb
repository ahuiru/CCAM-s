<div class="card mb-6">
    <div class="card-image">
      <figure class="image">
        <%= link_to [@photo] do %>
          <%= image_tag @photo.image %>
        <% end %>
      </figure>
    </div>
    <div class="card-content">
      <div>
        <%= link_to @photo.user.email, [@photo.user] %>
      </div>
      <div>
        <%= @photo.caption %>
      </div>
      <div>
        <% if current_user.likes.exists?(photo_id: @photo.id) %>
          <%= link_to 'unlike', [@photo, :like], method: :delete %>
        <% else %>
          <%= link_to 'like', [@photo, :like], method: :post %>
        <% end %>
      </div>
    </div>
  </div>



<% @photo.comments.each do |comment| %>
  <div class="card mb-1">
    <div class="card-image">
      <div class="card-content">
        <div>
          <%= link_to comment.user.email, [comment.user] %>
        </div>
        <div class="pt-2 pl-2">
          <%= comment.body %>
        </div>
        <% if comment.user == current_user %>
          <div class="pl-2">
            <%= link_to 'delete', [@photo, comment], method: :delete %>
          </div>
        <% end %>
      </div>
    </div>
  </div>
<% end %>


<% if user_signed_in? %>
  <div class="card mb-1">
    <div class="card-image">
      <div class="card-content">
        <%= form_with model: [@photo, @comment], local:true do |f| %>
          <div class="field">
            <%= f.text_field :body, class: 'input' %>
          </div>
          <%= f.submit class: 'button is-primary' %>
        <% end %>
      <% end %>
    </div>
  </div>
</div>
